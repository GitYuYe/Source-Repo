---
title: nginx和php的关系		
date: 2017-07-23 20:17:00
categories: PHP
tags: PHP
---
　　nginx和php有什么关系？很多人可能有这个疑问，我之前学php也没注意这些问题，只管着按文档配置操作，完成php项目就不管了，最近特意总结了一下。

　　

　　php是一门编程语言，讲究说学逗唱...呃，不对，是可以编写很多程序，但是只有php的话，你的php只能在你的服务器里孤立的运行，比如你用php写了一个可以通过身高计算人的标准体重的程序，虽然这个程序可以在服务器运行，但是他还不能和客户交互，因为客户现在还不能访问你的php程序，他也不会去下载你的php程序到自己电脑里运行，他只想默默的通过浏览器告诉你他的身高，然后得到这个程序返回的体重，那么谁来得到这个用户发送过来的请求呢，又怎么把请求数据转发给对应的php程序呢 ？

 

　　nginx就是为了解决上述问题而出现的，nginx是一个已经写好的程序，需要安装配置，作用是专门接收处理客户通过浏览器等发送来的请求，并和你写的php程序交互，就这么简单，但是nginx不仅可以和你写的php程序交互，也可以和你写的其他程序交互，比如C，python，因为不是所有人都用php来写web程序，简单点说nginx是一个可以监听处理http请求（浏览器请求）的程序，会装会配置，知道流程就可以用了，当然深入了解下就更好了。

 

　　这样的话，nginx就可以比喻处理成处理http请求业务的部门，是服务器和外部千千万万浏览器等客户端进行沟通的关口。php是服务器内部一个数据加工部门，可以加工生成各种页面。客户端发送的http请求历经层层路由到达你的服务器，然后被nginx逮个正着，统一听候nginx大人的调度，如果客户请求的是其他静态资源，比如txt文本，图片等，nginx直接找到该资源，并返回给客户端，如果客户请求的是php程序，就找到对应的php程序，然后把客户数据给这个程序，让这个php程序运行一遍，再把这个程序运行的结果返回给客户端。

 

　　当然nginx和php具体交互并没有那么简单，还需要保证规范和高效，在数据交换上，需遵守统一的规范，这个好理解，大家统一数据格式才不会乱套，效率才会更高。

　　

　　为了更深入的理解nginx，你也可以自己写一个web服务，比如用c或python写一个程序监听你服务器的80端口，80端口就是http请求的入口，然后还要考虑多线程等处理，因为客户的请求有时候会一起过来，也就是并发，不能写个服务只能处理一个请求，得到客户的请求后还要得到需要的参数进行分析，如果对方请求的是php程序，要考虑在系统里实时启动对应的php程序，把数据交给那个程序，然后老老实实的等这个程序运行结束，得到该程序产生的结果，然后把这个结果送还给客户端，这样就完成任务了。自己去想办法实现还能补充不少知识，比如socket编程，c，进程之间是怎么进行交互的等等，写完后还会去关注处理请求能力，内存使用情况，这样下来就会有一个比较完整的认识，最后反过来就会去想nginx是怎样处理高并发的呢？为什么我写的遇到并发经常挂掉？我写的和php交互时为什么这么慢？nginx里配置的php-fpm又是什么？有了这些疑问后，再进行下一步深入探索，效率就会高很多了。